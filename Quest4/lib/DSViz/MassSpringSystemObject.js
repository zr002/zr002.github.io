const _0x4c6298=_0x5c97;function _0x5c97(_0x4ee737,_0x22b39c){const _0x17c0ec=_0x17c0();return _0x5c97=function(_0x5c972f,_0x55aabe){_0x5c972f=_0x5c972f-0x196;let _0x462cd3=_0x17c0ec[_0x5c972f];return _0x462cd3;},_0x5c97(_0x4ee737,_0x22b39c);}function _0x17c0(){const _0x228667=['createShaders','uniform','_particleBuffers','updateGeometry','_device','_particlePipeline','_canvasFormat','Particles\x20Buffer\x201\x20','length','1730322KyJakP','computeMain','setWindEnabled','fragmentSpringMain','4224ruvPCa','COMPUTE','720986kgZxnt','createBuffer','byteLength','_updatePipeline','getBindGroupLayout','_bindGroups','/shaders/massspring.wgsl','push','createBindGroup','_pipelineLayout','dispatchWorkgroups','ceil','MassSpring\x20Compute\x20Pipeline\x20','vertexMain','88DUSRXZ','3pmPeBp','_shaderModule','createPipelineLayout','createSpringGeometry','loadShader','_computePipeline','render','2604EySGBi','COPY_DST','_windUniformBuffer','createRenderPipeline','line-list','_step','_springGroups','createSpringPipeline','createGeometry','VERTEX','_bindGroupLayout','882492XedvUS','1007500yMdxtI','171860qCvyib','_numSpringsGroups','createComputePipeline','_numParticles','_particles','updateMain','queue','_springBuffers','createParticlePipeline','MassSpring\x20Shader\x20','createParticleGeometry','fragmentMain','Spring\x20Buffer\x20Group\x20','writeBuffer','_size','STORAGE','getName','storage','setPipeline','_springPipeline','line-strip','vertexSpringMain','Spring\x20Render\x20Pipeline\x20','MassSpring\x20Update\x20Pipeline\x20','1UoovSo','1853595MKCBHu','_numSpringsTotal','setBindGroup','read-only-storage','draw'];_0x17c0=function(){return _0x228667;};return _0x17c0();}(function(_0x263d7a,_0xa3b35d){const _0x43da3f=_0x5c97,_0x6c79c8=_0x263d7a();while(!![]){try{const _0x455c09=parseInt(_0x43da3f(0x1c2))/0x1*(parseInt(_0x43da3f(0x1d7))/0x2)+parseInt(_0x43da3f(0x196))/0x3*(-parseInt(_0x43da3f(0x1aa))/0x4)+-parseInt(_0x43da3f(0x1c3))/0x5+-parseInt(_0x43da3f(0x1a8))/0x6+parseInt(_0x43da3f(0x19d))/0x7*(-parseInt(_0x43da3f(0x1d5))/0x8)+-parseInt(_0x43da3f(0x1d1))/0x9+parseInt(_0x43da3f(0x1a9))/0xa*(parseInt(_0x43da3f(0x1e5))/0xb);if(_0x455c09===_0xa3b35d)break;else _0x6c79c8['push'](_0x6c79c8['shift']());}catch(_0x7b3f47){_0x6c79c8['push'](_0x6c79c8['shift']());}}}(_0x17c0,0x34fdd));import _0x5e3bb2 from'/lib/DSViz/SceneObject.js';export default class _0x1d980a extends _0x5e3bb2{constructor(_0x544c3c,_0x1ed83e,_0x42f471=0x10){const _0x488f31=_0x5c97;super(_0x544c3c,_0x1ed83e),this[_0x488f31(0x1b8)]=_0x42f471,this[_0x488f31(0x1ad)]=_0x42f471*_0x42f471,this[_0x488f31(0x1c4)]=this[_0x488f31(0x1b8)]*(this[_0x488f31(0x1b8)]-0x1)*0x2,this[_0x488f31(0x1a2)]=0x0,this[_0x488f31(0x19f)]=this[_0x488f31(0x1cc)][_0x488f31(0x1d8)]({'size':0x4,'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x488f31(0x19e)]});}async[_0x4c6298(0x1a5)](){const _0x16eb79=_0x4c6298;await this['createParticleGeometry'](),await this[_0x16eb79(0x199)]();}async[_0x4c6298(0x1b4)](){const _0x2ea020=_0x4c6298;this[_0x2ea020(0x1ae)]=new Float32Array(this['_numParticles']*0x8);const _0x31608b=this[_0x2ea020(0x1ae)][_0x2ea020(0x1d9)];this[_0x2ea020(0x1ca)]=[this[_0x2ea020(0x1cc)]['createBuffer']({'label':_0x2ea020(0x1cf)+this['getName'](),'size':_0x31608b,'usage':GPUBufferUsage[_0x2ea020(0x1b9)]|GPUBufferUsage[_0x2ea020(0x19e)]}),this[_0x2ea020(0x1cc)][_0x2ea020(0x1d8)]({'label':'Particles\x20Buffer\x202\x20'+this[_0x2ea020(0x1ba)](),'size':_0x31608b,'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x2ea020(0x19e)]})],this['resetParticles']();}['resetParticles'](){const _0x1e7bec=_0x4c6298;let _0x3cb7f3=0.7,_0x43999e=_0x3cb7f3/this['_size'];for(let _0x4aa01b=0x0;_0x4aa01b<this['_size'];++_0x4aa01b){for(let _0x48b64b=0x0;_0x48b64b<this[_0x1e7bec(0x1b8)];++_0x48b64b){let _0x45c4a6=_0x4aa01b*this[_0x1e7bec(0x1b8)]+_0x48b64b,_0x5a8a49=_0x45c4a6*0x8;this[_0x1e7bec(0x1ae)][_0x5a8a49+0x0]=-0.25+_0x43999e*_0x48b64b,this[_0x1e7bec(0x1ae)][_0x5a8a49+0x1]=0.5-_0x43999e*_0x4aa01b,this[_0x1e7bec(0x1ae)][_0x5a8a49+0x2]=0x0,this[_0x1e7bec(0x1ae)][_0x5a8a49+0x3]=0x0,this[_0x1e7bec(0x1ae)][_0x5a8a49+0x4]=0x0,this['_particles'][_0x5a8a49+0x5]=0x0,this[_0x1e7bec(0x1ae)][_0x5a8a49+0x6]=0.0001*this['_numParticles'],this[_0x1e7bec(0x1ae)][_0x5a8a49+0x7]=_0x4aa01b==0x0?0x1:0x0;}}this[_0x1e7bec(0x1a2)]=0x0,this['_device'][_0x1e7bec(0x1b0)]['writeBuffer'](this[_0x1e7bec(0x1ca)][this[_0x1e7bec(0x1a2)]%0x2],0x0,this[_0x1e7bec(0x1ae)]);}async[_0x4c6298(0x199)](){const _0x336098=_0x4c6298;this[_0x336098(0x1a3)]=[[],[],[],[]];let _0x19981d=0.7,_0x23e133=_0x19981d/this[_0x336098(0x1b8)],_0x5b129c=0x4;for(let _0x5f41f7=0x0;_0x5f41f7<this[_0x336098(0x1b8)];_0x5f41f7++){for(let _0x2bf45b=0x0;_0x2bf45b<this[_0x336098(0x1b8)]-0x1;_0x2bf45b++){let _0x16ed1b=_0x5f41f7%0x2*0x2+_0x2bf45b%0x2,_0xf6771b=_0x5f41f7*this[_0x336098(0x1b8)]+_0x2bf45b,_0x5ba331=_0x5f41f7*this[_0x336098(0x1b8)]+_0x2bf45b+0x1;this[_0x336098(0x1a3)][_0x16ed1b][_0x336098(0x1de)](_0xf6771b,_0x5ba331,_0x23e133,_0x5b129c);}}for(let _0x54ca32=0x0;_0x54ca32<this[_0x336098(0x1b8)];_0x54ca32++){for(let _0x141508=0x0;_0x141508<this[_0x336098(0x1b8)]-0x1;_0x141508++){let _0x2b0bd0=_0x141508%0x2*0x2+_0x54ca32%0x2,_0x9da8a1=_0x141508*this[_0x336098(0x1b8)]+_0x54ca32,_0x5980b=(_0x141508+0x1)*this[_0x336098(0x1b8)]+_0x54ca32;this[_0x336098(0x1a3)][_0x2b0bd0][_0x336098(0x1de)](_0x9da8a1,_0x5980b,_0x23e133,_0x5b129c);}}this[_0x336098(0x1b1)]=[],this[_0x336098(0x1ab)]=[];for(let _0x275ec4=0x0;_0x275ec4<0x4;_0x275ec4++){let _0x456828=new Float32Array(this[_0x336098(0x1a3)][_0x275ec4]);this[_0x336098(0x1ab)][_0x275ec4]=_0x456828[_0x336098(0x1d0)]/0x4;let _0x51feb7=this['_device']['createBuffer']({'label':_0x336098(0x1b6)+_0x275ec4+'\x20'+this[_0x336098(0x1ba)](),'size':_0x456828[_0x336098(0x1d9)],'usage':GPUBufferUsage[_0x336098(0x1b9)]|GPUBufferUsage[_0x336098(0x19e)]});this[_0x336098(0x1cc)][_0x336098(0x1b0)]['writeBuffer'](_0x51feb7,0x0,_0x456828),this[_0x336098(0x1b1)][_0x336098(0x1de)](_0x51feb7);}this[_0x336098(0x1a2)]=0x0;}[_0x4c6298(0x1cb)](){}async[_0x4c6298(0x1c8)](){const _0x37e789=_0x4c6298;let _0x3f455c=await this[_0x37e789(0x19a)](_0x37e789(0x1dd));this[_0x37e789(0x197)]=this[_0x37e789(0x1cc)]['createShaderModule']({'label':_0x37e789(0x1b3)+this[_0x37e789(0x1ba)](),'code':_0x3f455c}),this[_0x37e789(0x1a7)]=this[_0x37e789(0x1cc)]['createBindGroupLayout']({'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x37e789(0x1a6)]|GPUShaderStage[_0x37e789(0x1d6)],'buffer':{'type':_0x37e789(0x1c6)}},{'binding':0x1,'visibility':GPUShaderStage['COMPUTE'],'buffer':{'type':_0x37e789(0x1bb)}},{'binding':0x2,'visibility':GPUShaderStage[_0x37e789(0x1a6)]|GPUShaderStage[_0x37e789(0x1d6)],'buffer':{'type':_0x37e789(0x1c6)}},{'binding':0x3,'visibility':GPUShaderStage[_0x37e789(0x1d6)],'buffer':{'type':_0x37e789(0x1c9)}}]}),this[_0x37e789(0x1e0)]=this[_0x37e789(0x1cc)][_0x37e789(0x198)]({'label':'MassSpring\x20Pipeline\x20Layout','bindGroupLayouts':[this[_0x37e789(0x1a7)]]});}async[_0x4c6298(0x1a0)](){const _0x5f3d86=_0x4c6298;await this[_0x5f3d86(0x1b2)](),await this[_0x5f3d86(0x1a4)]();}async[_0x4c6298(0x1b2)](){const _0x556c3e=_0x4c6298;this[_0x556c3e(0x1cd)]=this['_device'][_0x556c3e(0x1a0)]({'label':'Particles\x20Render\x20Pipeline\x20'+this[_0x556c3e(0x1ba)](),'layout':this[_0x556c3e(0x1e0)],'vertex':{'module':this[_0x556c3e(0x197)],'entryPoint':_0x556c3e(0x1e4)},'fragment':{'module':this[_0x556c3e(0x197)],'entryPoint':_0x556c3e(0x1b5),'targets':[{'format':this['_canvasFormat']}]},'primitives':{'typology':_0x556c3e(0x1be)}}),this[_0x556c3e(0x1dc)]=[this[_0x556c3e(0x1cc)][_0x556c3e(0x1df)]({'layout':this[_0x556c3e(0x1cd)][_0x556c3e(0x1db)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x556c3e(0x1ca)][0x0]}},{'binding':0x1,'resource':{'buffer':this[_0x556c3e(0x1ca)][0x1]}},{'binding':0x2,'resource':{'buffer':this[_0x556c3e(0x1b1)][0x0]}},{'binding':0x3,'resource':{'buffer':this[_0x556c3e(0x19f)]}}]}),this[_0x556c3e(0x1cc)]['createBindGroup']({'layout':this[_0x556c3e(0x1cd)][_0x556c3e(0x1db)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x556c3e(0x1ca)][0x1]}},{'binding':0x1,'resource':{'buffer':this['_particleBuffers'][0x0]}},{'binding':0x2,'resource':{'buffer':this['_springBuffers'][0x0]}},{'binding':0x3,'resource':{'buffer':this[_0x556c3e(0x19f)]}}]})];}async['createSpringPipeline'](){const _0x431003=_0x4c6298;this[_0x431003(0x1bd)]=this[_0x431003(0x1cc)][_0x431003(0x1a0)]({'label':_0x431003(0x1c0)+this[_0x431003(0x1ba)](),'layout':this[_0x431003(0x1e0)],'vertex':{'module':this['_shaderModule'],'entryPoint':_0x431003(0x1bf)},'fragment':{'module':this[_0x431003(0x197)],'entryPoint':_0x431003(0x1d4),'targets':[{'format':this[_0x431003(0x1ce)]}]},'primitives':{'typology':_0x431003(0x1a1)}});}[_0x4c6298(0x19c)](_0x498918){const _0x5ed443=_0x4c6298;for(let _0x1e0750=0x0;_0x1e0750<0x4;_0x1e0750++){let _0x24ef24=this[_0x5ed443(0x1cc)][_0x5ed443(0x1df)]({'layout':this[_0x5ed443(0x1bd)][_0x5ed443(0x1db)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x5ed443(0x1ca)][this[_0x5ed443(0x1a2)]%0x2]}},{'binding':0x1,'resource':{'buffer':this[_0x5ed443(0x1ca)][(this[_0x5ed443(0x1a2)]+0x1)%0x2]}},{'binding':0x2,'resource':{'buffer':this['_springBuffers'][_0x1e0750]}},{'binding':0x3,'resource':{'buffer':this[_0x5ed443(0x19f)]}}]});_0x498918[_0x5ed443(0x1bc)](this['_springPipeline']),_0x498918[_0x5ed443(0x1c5)](0x0,_0x24ef24),_0x498918['draw'](0xc,this[_0x5ed443(0x1ab)][_0x1e0750]);}_0x498918[_0x5ed443(0x1bc)](this[_0x5ed443(0x1cd)]),_0x498918['setBindGroup'](0x0,this['_bindGroups'][this['_step']%0x2]),_0x498918[_0x5ed443(0x1c7)](0x80,this[_0x5ed443(0x1ad)]);}async[_0x4c6298(0x1ac)](){const _0x18ad1f=_0x4c6298;this[_0x18ad1f(0x19b)]=this['_device']['createComputePipeline']({'label':_0x18ad1f(0x1e3)+this[_0x18ad1f(0x1ba)](),'layout':this[_0x18ad1f(0x1e0)],'compute':{'module':this['_shaderModule'],'entryPoint':_0x18ad1f(0x1d2)}}),this[_0x18ad1f(0x1da)]=this[_0x18ad1f(0x1cc)][_0x18ad1f(0x1ac)]({'label':_0x18ad1f(0x1c1)+this[_0x18ad1f(0x1ba)](),'layout':this[_0x18ad1f(0x1e0)],'compute':{'module':this[_0x18ad1f(0x197)],'entryPoint':_0x18ad1f(0x1af)}});}['compute'](_0x3eadbe){const _0x3fcea0=_0x4c6298;for(let _0x15ee98=0x0;_0x15ee98<0x4;_0x15ee98++){let _0x3ef83a=this[_0x3fcea0(0x1cc)][_0x3fcea0(0x1df)]({'layout':this['_computePipeline'][_0x3fcea0(0x1db)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this['_particleBuffers'][this[_0x3fcea0(0x1a2)]%0x2]}},{'binding':0x1,'resource':{'buffer':this[_0x3fcea0(0x1ca)][(this[_0x3fcea0(0x1a2)]+0x1)%0x2]}},{'binding':0x2,'resource':{'buffer':this[_0x3fcea0(0x1b1)][_0x15ee98]}},{'binding':0x3,'resource':{'buffer':this['_windUniformBuffer']}}]});_0x3eadbe['setPipeline'](this['_computePipeline']),_0x3eadbe[_0x3fcea0(0x1c5)](0x0,_0x3ef83a),_0x3eadbe[_0x3fcea0(0x1e1)](Math[_0x3fcea0(0x1e2)](this[_0x3fcea0(0x1ab)][_0x15ee98]/0x100));}_0x3eadbe[_0x3fcea0(0x1bc)](this[_0x3fcea0(0x1da)]),_0x3eadbe[_0x3fcea0(0x1c5)](0x0,this[_0x3fcea0(0x1dc)][this[_0x3fcea0(0x1a2)]%0x2]),_0x3eadbe[_0x3fcea0(0x1e1)](Math[_0x3fcea0(0x1e2)](this[_0x3fcea0(0x1ad)]/0x100)),++this[_0x3fcea0(0x1a2)];}[_0x4c6298(0x1d3)](_0x1a15c6){const _0x56cfc8=_0x4c6298;let _0x324bcf=new Float32Array([_0x1a15c6?0x1:0x0]);this[_0x56cfc8(0x1cc)][_0x56cfc8(0x1b0)][_0x56cfc8(0x1b7)](this[_0x56cfc8(0x19f)],0x0,_0x324bcf);}}
