const _0x3955bf=_0x337d;function _0x337d(_0x5759ab,_0x13586a){const _0x502e9a=_0x502e();return _0x337d=function(_0x337dfb,_0xdbf7f0){_0x337dfb=_0x337dfb-0x15c;let _0x1b324c=_0x502e9a[_0x337dfb];return _0x1b324c;},_0x337d(_0x5759ab,_0x13586a);}function _0x502e(){const _0x8c2d99=['getName','updateMouseState\x20called:','_canvasFormat','5840361XattSp','_particles','log','_bindGroupLayout','_particleStride','VERTEX','32796WnyGnS','getBindGroupLayout','updateGeometry','Particles\x20Shader\x20','1390008UYsivS','random','_numParticles','createPipelineLayout','queue','COMPUTE','_particleBuffers','_step','createRenderPipeline','_bindGroups','965377acOadP','427530VbpqLM','setPipeline','FRAGMENT','_pipelineLayout','storage','367436EKbHuI','createBindGroupLayout','draw','_mouseUniformBuffer','updateMouseState','120383xwjGsM','writeBuffer','_shaderModule','_computePipeline','8NhnjLd','createBindGroup','Particles\x20Pipeline\x20Layout','createGeometry','createComputePipeline','ceil','COPY_DST','setBindGroup','dispatchWorkgroups','createParticlePipeline','createBuffer','Particles\x20Compute\x20Pipeline\x20','/shaders/particles.wgsl','createShaderModule','createShaders','3mkCzpH','_particlePipeline','STORAGE','compute','read-only-storage','COPY_SRC','spawnFirework','line-strip','createParticleGeometry','vertexMain','_device'];_0x502e=function(){return _0x8c2d99;};return _0x502e();}(function(_0x27ead4,_0x124f9b){const _0x1c8efd=_0x337d,_0x29fd0e=_0x27ead4();while(!![]){try{const _0x49ceb2=-parseInt(_0x1c8efd(0x19b))/0x1+-parseInt(_0x1c8efd(0x182))/0x2*(parseInt(_0x1c8efd(0x16e))/0x3)+parseInt(_0x1c8efd(0x196))/0x4+-parseInt(_0x1c8efd(0x191))/0x5+-parseInt(_0x1c8efd(0x186))/0x6+parseInt(_0x1c8efd(0x190))/0x7*(-parseInt(_0x1c8efd(0x15f))/0x8)+parseInt(_0x1c8efd(0x17c))/0x9;if(_0x49ceb2===_0x124f9b)break;else _0x29fd0e['push'](_0x29fd0e['shift']());}catch(_0x172739){_0x29fd0e['push'](_0x29fd0e['shift']());}}}(_0x502e,0x245ba));import _0x509af0 from'/lib/DSViz/SceneObject.js';export default class _0x9f1e30 extends _0x509af0{constructor(_0x204138,_0x3f01f5,_0x124205=0x19000){const _0x5dfa12=_0x337d;super(_0x204138,_0x3f01f5),this[_0x5dfa12(0x188)]=_0x124205,this[_0x5dfa12(0x18d)]=0x0,this[_0x5dfa12(0x199)]=this['_device'][_0x5dfa12(0x169)]({'size':0x3*0x4,'usage':GPUBufferUsage['UNIFORM']|GPUBufferUsage[_0x5dfa12(0x165)]});}async[_0x3955bf(0x162)](){const _0x5df893=_0x3955bf;await this[_0x5df893(0x176)]();}async[_0x3955bf(0x176)](){const _0x2b8331=_0x3955bf;this['_particleStride']=0x7,this[_0x2b8331(0x17d)]=new Float32Array(this[_0x2b8331(0x188)]*this[_0x2b8331(0x180)]);const _0x4af60b=this[_0x2b8331(0x17d)]['byteLength'];this['_particleBuffers']=[this['_device']['createBuffer']({'size':_0x4af60b,'usage':GPUBufferUsage['STORAGE']|GPUBufferUsage[_0x2b8331(0x165)]|GPUBufferUsage[_0x2b8331(0x173)]}),this['_device']['createBuffer']({'size':_0x4af60b,'usage':GPUBufferUsage[_0x2b8331(0x170)]|GPUBufferUsage[_0x2b8331(0x165)]|GPUBufferUsage['COPY_SRC']})],this['resetParticles']();}['resetParticles'](){const _0x185b41=_0x3955bf;for(let _0x2804de=0x0;_0x2804de<this[_0x185b41(0x188)];_0x2804de++){const _0x37ca05=_0x2804de*this[_0x185b41(0x180)],_0xd85487=-0.25+Math[_0x185b41(0x187)]()*0.5,_0x3bab7d=0x1;this['_particles'][_0x37ca05+0x0]=_0xd85487,this[_0x185b41(0x17d)][_0x37ca05+0x1]=_0x3bab7d,this[_0x185b41(0x17d)][_0x37ca05+0x2]=_0xd85487,this['_particles'][_0x37ca05+0x3]=_0x3bab7d,this[_0x185b41(0x17d)][_0x37ca05+0x4]=0.005,this[_0x185b41(0x17d)][_0x37ca05+0x5]=-(0.005+Math[_0x185b41(0x187)]()*0.015),this[_0x185b41(0x17d)][_0x37ca05+0x6]=0x0;}this[_0x185b41(0x18d)]=0x0,this[_0x185b41(0x178)][_0x185b41(0x18a)][_0x185b41(0x15c)](this['_particleBuffers'][this['_step']%0x2],0x0,this[_0x185b41(0x17d)]);}[_0x3955bf(0x174)](_0xf031ed,_0x55df6d){const _0x493703=_0x3955bf,_0x28069f=0x64;for(let _0x2bc258=0x0;_0x2bc258<_0x28069f;_0x2bc258++){const _0x36b0aa=_0x2bc258*this[_0x493703(0x180)];this[_0x493703(0x17d)][_0x36b0aa+0x0]=_0xf031ed,this[_0x493703(0x17d)][_0x36b0aa+0x1]=_0x55df6d,this[_0x493703(0x17d)][_0x36b0aa+0x2]=_0xf031ed,this[_0x493703(0x17d)][_0x36b0aa+0x3]=_0x55df6d,this[_0x493703(0x17d)][_0x36b0aa+0x4]=(Math[_0x493703(0x187)]()-0.5)*0.01,this[_0x493703(0x17d)][_0x36b0aa+0x5]=0.001+Math[_0x493703(0x187)]()*0.002,this[_0x493703(0x17d)][_0x36b0aa+0x6]=0x80;}this['_device']['queue'][_0x493703(0x15c)](this[_0x493703(0x18c)][this[_0x493703(0x18d)]%0x2],0x0,this[_0x493703(0x17d)]);}[_0x3955bf(0x184)](){}async[_0x3955bf(0x16d)](){const _0x3618e2=_0x3955bf;let _0x5cf23b=await this['loadShader'](_0x3618e2(0x16b));this['_shaderModule']=this[_0x3618e2(0x178)][_0x3618e2(0x16c)]({'label':_0x3618e2(0x185)+this['getName'](),'code':_0x5cf23b}),this[_0x3618e2(0x17f)]=this[_0x3618e2(0x178)][_0x3618e2(0x197)]({'entries':[{'binding':0x0,'visibility':GPUShaderStage[_0x3618e2(0x181)]|GPUShaderStage[_0x3618e2(0x18b)],'buffer':{'type':_0x3618e2(0x172)}},{'binding':0x1,'visibility':GPUShaderStage[_0x3618e2(0x18b)],'buffer':{'type':_0x3618e2(0x195)}},{'binding':0x2,'visibility':GPUShaderStage[_0x3618e2(0x181)]|GPUShaderStage[_0x3618e2(0x18b)]|GPUShaderStage[_0x3618e2(0x193)],'buffer':{'type':'uniform'}}]}),this[_0x3618e2(0x194)]=this[_0x3618e2(0x178)][_0x3618e2(0x189)]({'label':_0x3618e2(0x161),'bindGroupLayouts':[this[_0x3618e2(0x17f)]]});}async[_0x3955bf(0x18e)](){const _0x3f3bc6=_0x3955bf;await this[_0x3f3bc6(0x168)]();}async[_0x3955bf(0x168)](){const _0x3fdc35=_0x3955bf;this[_0x3fdc35(0x16f)]=this[_0x3fdc35(0x178)]['createRenderPipeline']({'label':'Particles\x20Render\x20Pipeline\x20'+this[_0x3fdc35(0x179)](),'layout':this[_0x3fdc35(0x194)],'vertex':{'module':this[_0x3fdc35(0x15d)],'entryPoint':_0x3fdc35(0x177)},'fragment':{'module':this['_shaderModule'],'entryPoint':'fragmentMain','targets':[{'format':this[_0x3fdc35(0x17b)]}]},'primitives':{'typology':_0x3fdc35(0x175)}}),this[_0x3fdc35(0x18f)]=[this[_0x3fdc35(0x178)][_0x3fdc35(0x160)]({'layout':this[_0x3fdc35(0x16f)][_0x3fdc35(0x183)](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x3fdc35(0x18c)][0x0]}},{'binding':0x1,'resource':{'buffer':this[_0x3fdc35(0x18c)][0x1]}},{'binding':0x2,'resource':{'buffer':this[_0x3fdc35(0x199)]}}]}),this[_0x3fdc35(0x178)]['createBindGroup']({'layout':this[_0x3fdc35(0x16f)]['getBindGroupLayout'](0x0),'entries':[{'binding':0x0,'resource':{'buffer':this[_0x3fdc35(0x18c)][0x1]}},{'binding':0x1,'resource':{'buffer':this['_particleBuffers'][0x0]}},{'binding':0x2,'resource':{'buffer':this['_mouseUniformBuffer']}}]})];}['render'](_0x2a5aa3){const _0x44bde7=_0x3955bf;_0x2a5aa3['setPipeline'](this[_0x44bde7(0x16f)]),_0x2a5aa3[_0x44bde7(0x166)](0x0,this['_bindGroups'][this[_0x44bde7(0x18d)]%0x2]),_0x2a5aa3[_0x44bde7(0x198)](0x80,this[_0x44bde7(0x188)]);}async['createComputePipeline'](){const _0x1dec14=_0x3955bf;this[_0x1dec14(0x15e)]=this[_0x1dec14(0x178)][_0x1dec14(0x163)]({'label':_0x1dec14(0x16a)+this[_0x1dec14(0x179)](),'layout':this[_0x1dec14(0x194)],'compute':{'module':this['_shaderModule'],'entryPoint':'computeMain'}});}[_0x3955bf(0x171)](_0x1a043a){const _0x17ff79=_0x3955bf;_0x1a043a[_0x17ff79(0x192)](this['_computePipeline']),_0x1a043a[_0x17ff79(0x166)](0x0,this[_0x17ff79(0x18f)][this[_0x17ff79(0x18d)]%0x2]),_0x1a043a[_0x17ff79(0x167)](Math[_0x17ff79(0x164)](this[_0x17ff79(0x188)]/0x100)),++this['_step'];}[_0x3955bf(0x19a)](_0x174887,_0x5dcc65,_0x2ba29c){const _0x3b786c=_0x3955bf;console[_0x3b786c(0x17e)](_0x3b786c(0x17a),_0x174887,_0x5dcc65,_0x2ba29c);let _0x3c5780=new Float32Array([_0x174887,_0x5dcc65,_0x2ba29c?0x1:0x0]);this['_device'][_0x3b786c(0x18a)][_0x3b786c(0x15c)](this[_0x3b786c(0x199)],0x0,_0x3c5780);}}
